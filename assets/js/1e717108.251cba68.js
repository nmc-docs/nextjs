"use strict";(self.webpackChunknextjs=self.webpackChunknextjs||[]).push([[809],{4151:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>o,frontMatter:()=>h,metadata:()=>r,toc:()=>l});var c=t(4848),i=t(8453);const h={sidebar_position:6},s="fetch()",r={id:"functions/fetch",title:"fetch()",description:"Gi\u1edbi thi\u1ec7u",source:"@site/docs/functions/fetch.md",sourceDirName:"functions",slug:"/functions/fetch",permalink:"/nextjs/functions/fetch",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"redirect()",permalink:"/nextjs/functions/redirect"},next:{title:"revalidateTag()",permalink:"/nextjs/functions/revalidateTag"}},d={},l=[{value:"Gi\u1edbi thi\u1ec7u",id:"gi\u1edbi-thi\u1ec7u",level:2},{value:"<code>options.cache</code>",id:"optionscache",level:3},{value:"<code>options.next.revalidate</code>",id:"optionsnextrevalidate",level:3},{value:"<code>options.next.tags</code>",id:"optionsnexttags",level:3},{value:"V\xed d\u1ee5",id:"v\xed-d\u1ee5",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"fetch",children:"fetch()"})}),"\n",(0,c.jsx)(n.h2,{id:"gi\u1edbi-thi\u1ec7u",children:"Gi\u1edbi thi\u1ec7u"}),"\n",(0,c.jsx)(n.admonition,{type:"info",children:(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["NextJS cung c\u1ea5p cho ta fetch() API \u0111\u01b0\u1ee3c m\u1edf r\u1ed9ng t\u1eeb ",(0,c.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API",children:"Web fetch() API"})," \u0111\u1ec3 cho ph\xe9p ta g\u1ecdi nh\u01b0 li\u1ec7u, th\u1ef1c hi\u1ec7n caching, revalidating,... b\xean trong ",(0,c.jsx)(n.a,{href:"../rendering#server-component",children:"server component"})]}),"\n"]})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"C\xfa ph\xe1p:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"fetch(url, options);\n"})}),"\n",(0,c.jsx)(n.admonition,{type:"note",children:(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["V\xec \u0111\u01b0\u1ee3c m\u1edf r\u1ed9ng t\u1eeb ",(0,c.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API",children:"Web fetch() API"})," n\xean c\xf3 c\xf3 c\xe1c options t\u1eeb n\xf3 v\xe0 m\u1ed9t s\u1ed1 options do NextJS cung c\u1ea5p th\xeam \u0111\u1ec3 h\u1ed7 tr\u1ee3 vi\u1ec7c caching v\xe0 revalidating."]}),"\n"]})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"C\u1ea5u h\xecnh th\xeam do NextJS cung c\u1ea5p:"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"optionscache",children:(0,c.jsx)(n.code,{children:"options.cache"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Ch\u1ec9 \u0111\u1ecbnh xem NextJS c\xf3 n\xean caching d\u1eef li\u1ec7u v\u1eeba fetch \u0111\u01b0\u1ee3c hay kh\xf4ng."}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:'fetch(`https://...`, { cache: "force-cache" | "no-store" });\n'})}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"cache value"}),(0,c.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:'"force-cache"'})}),(0,c.jsxs)(n.td,{children:["NextJS s\u1ebd t\xecm d\u1eef li\u1ec7u trong cache kh\u1edbp v\u1edbi d\u1eef li\u1ec7u \u0111ang c\u1ea7n fetch:",(0,c.jsx)("br",{}),"+ N\u1ebfu t\xecm th\u1ea5y v\xe0 d\u1eef li\u1ec7u c\xf2n m\u1edbi, n\xf3 s\u1ebd tr\u1ea3 v\u1ec1 t\u1eeb cache",(0,c.jsx)("br",{}),"+ N\u1ebfu kh\xf4ng t\xecm th\u1ea5y ho\u1eb7c d\u1eef li\u1ec7u \u0111\xe3 c\u0169, NextJS s\u1ebd fetch d\u1eef li\u1ec7u m\u1edbi, c\u1eadp nh\u1eadt v\xe0o cache v\xe0 tr\u1ea3 v\u1ec1"]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:'"no-store"'})}),(0,c.jsx)(n.td,{children:"NextJS s\u1ebd lu\xf4n t\xecm n\u1ea1p d\u1eef li\u1ec7u m\u1edbi\xa0t\u1eeb server v\xe0 kh\xf4ng l\u01b0u v\xe0o cache."})]})]})]}),"\n",(0,c.jsx)(n.admonition,{type:"note",children:(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["T\u1eeb NextJS version 15 tr\u1edf \u0111i, gi\xe1 tr\u1ecb ",(0,c.jsx)(n.code,{children:'"no-store"'})," l\xe0 gi\xe1 tr\u1ecb m\u1eb7c \u0111\u1ecbnh."]}),"\n",(0,c.jsxs)(n.li,{children:["T\u1eeb NextJS version 14 tr\u1edf v\u1ec1 tr\u01b0\u1edbc, gi\xe1 tr\u1ecb m\u1eb7c \u0111\u1ecbnh l\xe0 ",(0,c.jsx)(n.code,{children:'"force-cache"'}),"."]}),"\n"]})}),"\n",(0,c.jsx)(n.h3,{id:"optionsnextrevalidate",children:(0,c.jsx)(n.code,{children:"options.next.revalidate"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"C\u1ea5u h\xecnh n\xe0y thi\u1ebft l\u1eadp th\u1eddi gian s\u1ed1ng c\u1ee7a cache."}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:"fetch(`https://...`, { next: { revalidate: false | 0 | number } });\n"})}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"revalidate value"}),(0,c.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"false"})}),(0,c.jsxs)(n.td,{children:["D\u1eef li\u1ec7u c\u0169\xa0trong cache s\u1ebd t\u1ed3n t\u1ea1i v\u0129nh vi\u1ec5n v\xe0 kh\xf4ng bao gi\u1edd \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt cho \u0111\u1ebfn khi ta c\u1eadp nh\u1eadt d\u1eef li\u1ec7u m\u1edbi v\xe0o cache th\u1ee7\xa0c\xf4ng\xa0th\xf4ng qua h\xe0m",(0,c.jsx)(n.a,{href:"./revalidateTag",children:"revalidateTag()"})]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"0"})}),(0,c.jsx)(n.td,{children:"Ng\u0103n kh\xf4ng cho caching d\u1eef li\u1ec7u"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:[(0,c.jsx)(n.code,{children:"number"})," (in seconds)"]}),(0,c.jsx)(n.td,{children:"Thi\u1ebft l\u1eadp th\u1eddi gian s\u1ed1ng c\u1ee7a d\u1eef li\u1ec7u trong cache. Sau m\u1ed7i kho\u1ea3ng\xa0th\u1eddi gian n\xe0y, NextJS s\u1ebd t\u1ef1 \u0111\u1ed9ng re-fetch \u0111\u1ec3\xa0c\u1eadp nh\u1eadt\xa0d\u1eef li\u1ec7u m\u1edbi v\xe0 l\u01b0u v\xe0o cache."})]})]})]}),"\n",(0,c.jsx)(n.admonition,{type:"tip",children:(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Ta kh\xf4ng c\u1ea7n thi\u1ebft l\u1eadp c\u1ea5u h\xecnh ",(0,c.jsx)(n.code,{children:"cache"})," n\u1ebfu ",(0,c.jsx)(n.code,{children:"next.revalidate"})," \u0111\u01b0\u1ee3c set gi\xe1 tr\u1ecb v\xec:","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"next.revalidate = 0"})," t\u01b0\u01a1ng \u0111\u01b0\u01a1ng v\u1edbi ",(0,c.jsx)(n.code,{children:'cache = "no-store"'})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"next.revalidate = number"})," th\xec t\u1ef1 \u0111\u1ed9ng ",(0,c.jsx)(n.code,{children:'cache = "force-cache"'})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["S\u1ebd x\u1ea3y ra conflict n\u1ebfu ta thi\u1ebft l\u1eadp nh\u01b0 sau: ",(0,c.jsx)(n.code,{children:"{ revalidate: 3600, cache: 'no-store' }"})]}),"\n"]})}),"\n",(0,c.jsx)(n.admonition,{type:"caution",children:(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Khi thi\u1ebft l\u1eadp ",(0,c.jsx)(n.code,{children:'cache: "force-cache"'})," th\xec ",(0,c.jsx)(n.strong,{children:"PH\u1ea2I"})," thi\u1ebft l\u1eadp ",(0,c.jsx)(n.code,{children:"next.revalidate"})," l\xe0 m\u1ed9t ",(0,c.jsx)(n.strong,{children:"number"})," v\xec n\u1ebfu kh\xf4ng thi\u1ebft l\u1eadp l\xe0 m\u1ed9t ",(0,c.jsx)(n.strong,{children:"number"})," th\xec n\xf3 s\u1ebd c\xf3 gi\xe1 tr\u1ecb m\u1eb7c \u0111\u1ecbnh l\xe0 ",(0,c.jsx)(n.code,{children:"false"}),", m\xe0 c\xf3 gi\xe1 tr\u1ecb ",(0,c.jsx)(n.code,{children:"false"})," s\u1ebd d\u1eabn \u0111\u1ebfn d\u1eef li\u1ec7u c\u0169\xa0trong cache s\u1ebd t\u1ed3n t\u1ea1i v\u0129nh vi\u1ec5n v\xe0 kh\xf4ng bao gi\u1edd \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt cho \u0111\u1ebfn khi ta c\u1eadp nh\u1eadt d\u1eef li\u1ec7u m\u1edbi v\xe0o cache th\u1ee7\xa0c\xf4ng\xa0th\xf4ng qua h\xe0m ",(0,c.jsx)(n.a,{href:"./revalidateTag",children:"revalidateTag()"})]}),"\n"]})}),"\n",(0,c.jsx)(n.h3,{id:"optionsnexttags",children:(0,c.jsx)(n.code,{children:"options.next.tags"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Thi\u1ebft l\u1eadp tags cho cache, n\xf3 th\u01b0\u1eddng k\u1ebft h\u1ee3p s\u1eed d\u1ee5ng h\xe0m ",(0,c.jsx)(n.a,{href:"./revalidateTag",children:"revalidateTag()"})," \u0111\u1ec3 l\xe0m m\u1edbi d\u1eef li\u1ec7u trong cache."]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:'fetch(`https://...`, { next: { tags: ["collection"] } });\n'})}),"\n",(0,c.jsx)(n.h2,{id:"v\xed-d\u1ee5",children:"V\xed d\u1ee5"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ts",children:'export default async function Page() {\n  // This request should be cached until manually invalidated.\n  // Similar to `getStaticProps`.\n  // `force-cache` is the default and can be omitted.\n  const staticData = await fetch(`https://...`, { cache: "force-cache" });\n\n  // This request should be refetched on every request.\n  // Similar to `getServerSideProps`.\n  const dynamicData = await fetch(`https://...`, { cache: "no-store" });\n\n  // This request should be cached with a lifetime of 10 seconds.\n  // Similar to `getStaticProps` with the `revalidate` option.\n  const revalidatedData = await fetch(`https://...`, {\n    next: { revalidate: 10 },\n  });\n\n  return <div>...</div>;\n}\n'})})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var c=t(6540);const i={},h=c.createContext(i);function s(e){const n=c.useContext(h);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),c.createElement(h.Provider,{value:n},e.children)}}}]);