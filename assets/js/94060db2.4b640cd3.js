"use strict";(self.webpackChunknextjs=self.webpackChunknextjs||[]).push([[982],{9447:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var s=t(4848),r=t(8453);const i={sidebar_position:9},o="Route Handlers",a={id:"routing/route-handlers",title:"Route Handlers",description:"Route Handlers l\xe0 g\xec?",source:"@site/docs/routing/route-handlers.md",sourceDirName:"routing",slug:"/routing/route-handlers",permalink:"/nextjs/routing/route-handlers",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"L\u1ea5y gi\xe1 tr\u1ecb search params",permalink:"/nextjs/routing/search-params"},next:{title:"Middleware",permalink:"/nextjs/routing/middleware"}},l={},c=[{value:"Route Handlers l\xe0 g\xec?",id:"route-handlers-l\xe0-g\xec",level:2},{value:"T\u1ea1o Route Handler",id:"t\u1ea1o-route-handler",level:2},{value:"M\u1ed9t s\u1ed1 v\xed d\u1ee5 v\u1ec1 Route Handler",id:"m\u1ed9t-s\u1ed1-v\xed-d\u1ee5-v\u1ec1-route-handler",level:2},{value:"L\u1ea5y cookies",id:"l\u1ea5y-cookies",level:3},{value:"L\u1ea5y headers",id:"l\u1ea5y-headers",level:3},{value:"Redirect",id:"redirect",level:3},{value:"Dynamic route handler",id:"dynamic-route-handler",level:3},{value:"URL Query Parameters",id:"url-query-parameters",level:3},{value:"Request Body",id:"request-body",level:3},{value:"Request Body FormData",id:"request-body-formdata",level:3},{value:"CORS",id:"cors",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"route-handlers",children:"Route Handlers"})}),"\n",(0,s.jsx)(n.h2,{id:"route-handlers-l\xe0-g\xec",children:"Route Handlers l\xe0 g\xec?"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Route handler cho ph\xe9p ta vi\u1ebft 1 API nh\u01b0 backend. Nh\u1eadn request v\xe0 tr\u1ea3 v\u1ec1 response."}),"\n",(0,s.jsxs)(n.li,{children:["Ta c\xf3 th\u1ec3 \u0111\u1ecbnh ngh\u0129a c\xe1c ph\u01b0\u01a1ng th\u1ee9c ",(0,s.jsx)(n.strong,{children:"GET"}),", ",(0,s.jsx)(n.strong,{children:"POST"}),", ",(0,s.jsx)(n.strong,{children:"PUT"}),", ",(0,s.jsx)(n.strong,{children:"DELETE"}),",... t\u01b0\u01a1ng \u1ee9ng v\u1edbi c\xe1c HTTP Methods."]}),"\n"]})}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["M\u1ed9t s\u1ed1 l\u01b0u \xfd v\u1ec1 Route Handlers:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Route handlers kh\xf4ng tham gia v\xe0o layouts hay client-side nh\u01b0 ",(0,s.jsx)(n.strong,{children:"page.tsx"})]}),"\n",(0,s.jsxs)(n.li,{children:["Kh\xf4ng th\u1ec3 c\xf3 ",(0,s.jsx)(n.strong,{children:"route.js"})," c\xf9ng c\u1ea5p \u0111\u1ed9 v\u1edbi file ",(0,s.jsx)(n.strong,{children:"page.js"})]}),"\n"]}),"\n"]}),"\n"]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"1725026225418",src:t(834).A+"",width:"806",height:"232"})})]}),"\n",(0,s.jsx)(n.h2,{id:"t\u1ea1o-route-handler",children:"T\u1ea1o Route Handler"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u0110\u1ec3 t\u1ea1o route handler, ta t\u1ea1o file t\xean ",(0,s.jsx)(n.strong,{children:"route.ts"})," \u1edf b\xean trong th\u01b0 m\u1ee5c ",(0,s.jsx)(n.strong,{children:"app/api/..."})]}),"\n",(0,s.jsxs)(n.li,{children:["V\xed d\u1ee5, ta t\u1ea1o ",(0,s.jsx)(n.strong,{children:"app/api/user/route.ts"})," v\xe0 \u0111\u1ecbnh ngh\u0129a c\xe1c ph\u01b0\u01a1ng th\u1ee9c ",(0,s.jsx)(n.strong,{children:"GET"}),", ",(0,s.jsx)(n.strong,{children:"POST"}),", ",(0,s.jsx)(n.strong,{children:"PUT"}),", ",(0,s.jsx)(n.strong,{children:"DELETE"}),",... th\xec t\u01b0\u01a1ng \u1ee9ng v\u1edbi vi\u1ec7c ta \u0111ang t\u1ea1o endpoint ",(0,s.jsx)(n.strong,{children:"/api/user"})," nh\u01b0 \u1edf RESTful API"]}),"\n"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\u1ea1o ph\u01b0\u01a1ng th\u1ee9c ",(0,s.jsx)(n.strong,{children:"GET"})," v\u1edbi endpoint ",(0,s.jsx)(n.strong,{children:"/api/user"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="app/api/user/route.ts"',children:'import { NextRequest, NextResponse } from "next/server";\n\nexport const GET = async (req: NextRequest, res: NextResponse) => {\n  return NextResponse.json({ message: "Ok" });\n};\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["V\u1edbi m\u1ed7i h\xe0m ta \u0111\u1ecbnh ngh\u0129a t\u01b0\u01a1ng \u1ee9ng v\u1edbi method cho endpoint, n\xf3 nh\u1eadn 2 tham s\u1ed1 l\xe0 ",(0,s.jsx)(n.a,{href:"../functions/next-request",children:"NextRequest"})," v\xe0 ",(0,s.jsx)(n.a,{href:"../functions/next-response",children:"NextResponse"}),", t\u01b0\u01a1ng \u1ee9ng v\u1edbi \u0111\u1ed1i t\u01b0\u1ee3ng request nh\u1eadn \u0111\u01b0\u1ee3c v\xe0 response tr\u1ea3 v\u1ec1."]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"m\u1ed9t-s\u1ed1-v\xed-d\u1ee5-v\u1ec1-route-handler",children:"M\u1ed9t s\u1ed1 v\xed d\u1ee5 v\u1ec1 Route Handler"}),"\n",(0,s.jsx)(n.h3,{id:"l\u1ea5y-cookies",children:"L\u1ea5y cookies"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["C\xf3 2 c\xe1ch l\u1ea5y cookies t\u1eeb request: s\u1eed d\u1ee5ng h\xe0m ",(0,s.jsx)(n.a,{href:"../functions/cookies",children:"cookies()"})," ho\u1eb7c l\u1ea5y ra t\u1eeb \u0111\u1ed1i t\u01b0\u1ee3ng ",(0,s.jsx)(n.a,{href:"../functions/next-request",children:"NextRequest"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="app/api/route.ts"',children:'import { cookies } from "next/headers";\n\nexport async function GET(request: Request) {\n  //C\xe1ch 1\n  const cookieStore = cookies();\n  const token = cookieStore.get("token");\n\n  //C\xe1ch 2\n  const token = request.cookies.get("token");\n\n  return new Response("Hello, Next.js!", {\n    status: 200,\n    headers: { "Set-Cookie": `token=${token.value}` },\n  });\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"l\u1ea5y-headers",children:"L\u1ea5y headers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\u01b0\u01a1ng t\u1ef1, c\xf3 2 c\xe1ch l\u1ea5y th\xf4ng tin header t\u1eeb request: s\u1eed d\u1ee5ng h\xe0m ",(0,s.jsx)(n.a,{href:"../functions/headers",children:"headers()"})," ho\u1eb7c l\u1ea5y ra t\u1eeb \u0111\u1ed1i t\u01b0\u1ee3ng ",(0,s.jsx)(n.a,{href:"../functions/next-request",children:"NextRequest"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="app/api/route.ts"',children:'import { headers } from "next/headers";\n\nexport async function GET(request: Request) {\n  // C\xe1ch 1\n  const headersList = headers();\n  const referer = headersList.get("referer");\n\n  // C\xe1ch 2\n  const requestHeaders = new Headers(request.headers);\n\n  return new Response("Hello, Next.js!", {\n    status: 200,\n    headers: { referer: referer },\n  });\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"redirect",children:"Redirect"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Ta c\xf3 th\u1ec3 s\u1eed d\u1ee5ng h\xe0m ",(0,s.jsx)(n.a,{href:"../functions/redirect",children:"redirect()"})," \u0111\u1ec3 \u0111i\u1ec1u h\u01b0\u1edbng \u0111\u1ebfn URL kh\xe1c:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="app/api/route.ts"',children:'import { redirect } from "next/navigation";\n\nexport async function GET(request: Request) {\n  redirect("https://nextjs.org/");\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"dynamic-route-handler",children:"Dynamic route handler"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="app/items/[slug]/route.ts"',children:"export async function GET(\n  request: Request,\n  { params }: { params: { slug: string } }\n) {\n  const slug = params.slug; // 'a', 'b', or 'c'\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"1725034720312",src:t(1630).A+"",width:"810",height:"231"})}),"\n",(0,s.jsx)(n.h3,{id:"url-query-parameters",children:"URL Query Parameters"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="app/api/search/route.ts"',children:'import { type NextRequest } from "next/server";\n\nexport function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams;\n  const query = searchParams.get("query");\n  // query is "hello" for /api/search?query=hello\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"request-body",children:"Request Body"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="app/items/route.ts"',children:"export async function POST(request: Request) {\n  const res = await request.json();\n  return Response.json({ res });\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"request-body-formdata",children:"Request Body FormData"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="app/items/route.ts"',children:'export async function POST(request: Request) {\n  const formData = await request.formData();\n  const name = formData.get("name");\n  const email = formData.get("email");\n  return Response.json({ name, email });\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"cors",children:"CORS"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="app/api/route.ts"',children:'export async function GET(request: Request) {\n  return new Response("Hello, Next.js!", {\n    status: 200,\n    headers: {\n      "Access-Control-Allow-Origin": "*",\n      "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",\n      "Access-Control-Allow-Headers": "Content-Type, Authorization",\n    },\n  });\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},834:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/1725026225418-c6383c1b61889ff7d5b367bcca69d4f6.png"},1630:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/1725034720312-5a55a8906083f0a37ef9a03a19bb4794.png"},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(6540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);